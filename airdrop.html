<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NUUR Token Airdrop</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0a0f14, #121e29);
      color: #eee;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 2rem;
    }
    .logo { width: 80px; margin-bottom: 1rem; }
    h1 {
      color: #ffd700;
      margin-bottom: 1rem;
    }
    .button {
      background: #ffd700;
      color: #121e29;
      border: none;
      padding: 1rem 2rem;
      font-size: 1.2rem;
      font-weight: 600;
      border-radius: 50px;
      cursor: pointer;
      transition: background 0.3s;
      margin: 0.5rem 0;
    }
    .button:hover { background: #e6c300; }
    .button:disabled {
      background: #555;
      cursor: not-allowed;
    }
    .info {
      margin: 1rem 0;
      font-size: 1rem;
      text-align: center;
      line-height: 1.4;
    }
    footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #ccc;
      text-align: center;
    }
    footer a { color: #ffd700; text-decoration: none; }
    footer a:hover { text-decoration: underline; }
  </style>
</head>
<body>

  <img src="https://nuurtoken.site/logo.png" alt="NUUR Token Logo" class="logo">
  <h1>NUUR Token Airdrop</h1>

  <button id="connectBtn" class="button">Connect Wallet</button>

  <div id="airdropArea" style="display:none; width:100%; max-width:400px; text-align:center;">
    <p id="eligibilityMsg" class="info"></p>
    <button id="claimBtn" class="button" style="display:none;">Claim Airdrop</button>
    <div id="claimStatus" class="info"></div>
  </div>

  <footer>
    <p><strong>Disclaimer:</strong> Only eligible wallets may claim. This airdrop is final.</p>
    <p>Donate SDA: <a href="https://ledger.sidrachain.com/address/0x8F6FfB7B6BbfbBa563897B27FB784C5C5A8830E8" target="_blank">0x8F6FfB7B6BbfbBa563897B27FB784C5C5A8830E8</a></p>
  </footer>

  <script>
    const airdropAddress = '0x2B5dB4de40A5C6b6055F7a81764d02CD4c14F8eE'; // Replace with your deployed airdrop contract address
    const airdropABI = [
      { "inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"isEligible","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function" },
      { "inputs":[],"name":"claim","outputs":[],"stateMutability":"nonpayable","type":"function" }
    ];

    let web3, account, airdropContract;

    async function connectWallet() {
      if (!window.ethereum) {
        alert('Please install MetaMask!');
        return;
      }
      web3 = new Web3(window.ethereum);
      try {
        const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
        account = accounts[0];
        document.getElementById('connectBtn').innerText = 'Wallet Connected';
        document.getElementById('connectBtn').disabled = true;
        airdropContract = new web3.eth.Contract(airdropABI, airdropAddress);
        document.getElementById('airdropArea').style.display = 'block';
        checkEligibility();
      } catch (err) {
        console.error(err);
      }
    }

    async function checkEligibility() {
      const msgEl = document.getElementById('eligibilityMsg');
      try {
        const eligible = await airdropContract.methods.isEligible(account).call();
        if (eligible) {
          msgEl.innerText = 'üéâ You are eligible for the airdrop!';
          document.getElementById('claimBtn').style.display = 'inline-block';
        } else {
          msgEl.innerText = '‚ùå You are not eligible for this airdrop.';
        }
      } catch (err) {
        console.error(err);
        msgEl.innerText = 'Error checking eligibility.';
      }
    }

    async function claimAirdrop() {
      const statusEl = document.getElementById('claimStatus');
      statusEl.innerText = '‚è≥ Claiming...';
      try {
        const tx = await airdropContract.methods.claim().send({ from: account });
        const hash = tx.transactionHash;
        statusEl.innerHTML = `‚úÖ Claimed! <a href="https://ledger.sidrachain.com/tx/${hash}" target="_blank">View Transaction</a>`;
        document.getElementById('claimBtn').disabled = true;
      } catch (err) {
        console.error(err);
        statusEl.innerText = '‚ùå Claim failed. Try again later.';
      }
    }

    document.getElementById('connectBtn').addEventListener('click', connectWallet);
    document.getElementById('claimBtn').addEventListener('click', claimAirdrop);
  </script>
</body>
</html>
