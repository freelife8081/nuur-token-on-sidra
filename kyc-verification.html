<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuur Coin - KYC Verification</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4a00e0;
            --secondary: #8e2de2;
            --accent: #00c6ff;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark) 0%, #16213e 100%);
            color: var(--light);
            min-height: 100vh;
            background-attachment: fixed;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo-container {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo {
            width: 100px;
            height: 100px;
            margin: 0 auto 15px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(to right, var(--accent), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.5rem;
        }
        
        .intro-section {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 25px;
        }
        
        .intro-section h2 {
            color: var(--accent);
            margin-bottom: 15px;
        }
        
        .disclaimer {
            background: rgba(220, 53, 69, 0.1);
            border-left: 4px solid var(--danger);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .consent-section {
            margin: 25px 0;
        }
        
        .consent-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: var(--light);
            font-size: 16px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .verification-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 30px 0;
        }
        
        .capture-container {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }
        
        .capture-container h3 {
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .preview {
            width: 100%;
            max-width: 300px;
            height: 200px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin: 0 auto 15px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .preview video, .preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .btn {
            padding: 12px 25px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }
        
        .countdown {
            font-size: 18px;
            font-weight: bold;
            color: var(--accent);
            margin: 10px 0;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            background: var(--dark);
            color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            border-left: 4px solid var(--success);
        }
        
        .notification.error {
            border-left: 4px solid var(--danger);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }
        
        .step-indicator::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1;
        }
        
        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
        }
        
        .step.active {
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }
        
        .step.completed {
            background: var(--success);
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .verification-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo-container">
            <div class="logo">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiM0YTAwZTAiLz4KICA8cGF0aCBkPSJNMzAgNjBDMzAgNDcuODA1OCA0MC44MDU4IDM3IDUzIDM3QzY1LjE5NDIgMzcgNzYgNDcuODA1OCA3NiA2MEg2N0g2MUg0MEgzMFY2MFoiIGZpbGw9IiM4ZTJkZTIiLz4KICA8Y2lyY2xlIGN4PSI1MyIgY3k9IjQzIiByPSI3IiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4=" alt="Nuur Coin Logo">
            </div>
            <h1>Nuur Coin KYC Verification</h1>
        </div>
        
        <div class="step-indicator">
            <div class="step active">1</div>
            <div class="step">2</div>
            <div class="step">3</div>
            <div class="step">4</div>
        </div>
        
        <div class="intro-section fade-in visible">
            <h2>Welcome to Nuur Coin KYC Verification</h2>
            <p>To ensure the security of our platform and comply with regulatory requirements, we need to verify your identity. Our process is simple and respects your privacy:</p>
            <ul style="margin: 15px 0 15px 20px;">
                <li>No government ID required</li>
                <li>Only one photo and a short video for liveness check</li>
                <li>Quick and secure process</li>
            </ul>
            
            <div class="disclaimer">
                <strong>Important Disclaimer:</strong> This verification process is required to prevent fraud and ensure compliance with financial regulations. Your data will be securely processed and stored. By proceeding, you acknowledge that you understand and accept our terms.
            </div>
        </div>
        
        <div class="consent-section fade-in">
            <h3>Data Consent</h3>
            <p>We need your consent to collect and process your biometric data for identity verification purposes.</p>
            
            <div class="consent-checkbox">
                <input type="checkbox" id="consentCheckbox">
                <label for="consentCheckbox">I consent to Nuur Coin collecting and processing my photo and video for identity verification purposes. I understand that this data will be securely stored and used solely for verification and security purposes.</label>
            </div>
        </div>
        
        <div class="form-section fade-in">
            <div class="form-group">
                <label for="walletAddress">SIDRA (SDA) Wallet Address</label>
                <input type="text" id="walletAddress" placeholder="Enter your SDA wallet address">
            </div>
            
            <div class="form-group">
                <label for="country">Country of Residence</label>
                <select id="country">
                    <option value="">Select your country</option>
                    <!-- Countries will be populated by JavaScript -->
                </select>
            </div>
        </div>
        
        <div class="verification-section fade-in">
            <div class="capture-container">
                <h3>Step 1: Take a Photo</h3>
                <div class="preview" id="photoPreview">
                    <i class="fas fa-camera fa-3x"></i>
                </div>
                <button class="btn btn-secondary" id="takePhotoBtn">
                    <i class="fas fa-camera"></i> Take Photo
                </button>
            </div>
            
            <div class="capture-container">
                <h3>Step 2: Record Liveness Video (10 seconds)</h3>
                <div class="preview" id="videoPreview">
                    <i class="fas fa-video fa-3x"></i>
                </div>
                <div class="countdown" id="countdown" style="display: none;">10</div>
                <button class="btn btn-secondary" id="startVideoBtn">
                    <i class="fas fa-record-vinyl"></i> Start Recording
                </button>
                <button class="btn btn-secondary" id="stopVideoBtn" style="display: none;" disabled>
                    <i class="fas fa-stop"></i> Stop Recording
                </button>
            </div>
        </div>
        
        <div class="action-buttons fade-in">
            <button class="btn btn-primary" id="verifyBtn" disabled>
                <i class="fas fa-check-circle"></i> Verify Identity
            </button>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <div class="notification-content">Operation completed successfully!</div>
    </div>

    <script>
        // Populate countries list
        const countries = [
            "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", "Argentina", "Armenia", 
            "Australia", "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", 
            "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei", "Bulgaria", 
            "Burkina Faso", "Burundi", "Cabo Verde", "Cambodia", "Cameroon", "Canada", "Central African Republic", "Chad", 
            "Chile", "China", "Colombia", "Comoros", "Congo", "Costa Rica", "Croatia", "Cuba", "Cyprus", "Czech Republic", 
            "Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", 
            "Eritrea", "Estonia", "Eswatini", "Ethiopia", "Fiji", "Finland", "France", "Gabon", "Gambia", "Georgia", 
            "Germany", "Ghana", "Greece", "Grenada", "Guatemala", "Guinea", "Guinea-Bissau", "Guyana", "Haiti", "Honduras", 
            "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Israel", "Italy", "Jamaica", "Japan", 
            "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Korea, North", "Korea, South", "Kosovo", "Kuwait", "Kyrgyzstan", 
            "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", 
            "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Mauritania", "Mauritius", 
            "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar", 
            "Namibia", "Nauru", "Nepal", "Netherlands", "New Zealand", "Nicaragua", "Niger", "Nigeria", "North Macedonia", 
            "Norway", "Oman", "Pakistan", "Palau", "Palestine", "Panama", "Papua New Guinea", "Paraguay", "Peru", 
            "Philippines", "Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda", "Saint Kitts and Nevis", 
            "Saint Lucia", "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", 
            "Saudi Arabia", "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", 
            "Solomon Islands", "Somalia", "South Africa", "South Sudan", "Spain", "Sri Lanka", "Sudan", "Suriname", 
            "Sweden", "Switzerland", "Syria", "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Timor-Leste", "Togo", 
            "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Tuvalu", "Uganda", "Ukraine", 
            "United Arab Emirates", "United Kingdom", "United States", "Uruguay", "Uzbekistan", "Vanuatu", "Vatican City", 
            "Venezuela", "Vietnam", "Yemen", "Zambia", "Zimbabwe"
        ];
        
        const countrySelect = document.getElementById('country');
        countries.forEach(country => {
            const option = document.createElement('option');
            option.value = country;
            option.textContent = country;
            countrySelect.appendChild(option);
        });
        
        // DOM Elements
        const consentCheckbox = document.getElementById('consentCheckbox');
        const walletAddressInput = document.getElementById('walletAddress');
        const takePhotoBtn = document.getElementById('takePhotoBtn');
        const startVideoBtn = document.getElementById('startVideoBtn');
        const stopVideoBtn = document.getElementById('stopVideoBtn');
        const verifyBtn = document.getElementById('verifyBtn');
        const photoPreview = document.getElementById('photoPreview');
        const videoPreview = document.getElementById('videoPreview');
        const countdownEl = document.getElementById('countdown');
        const notificationEl = document.getElementById('notification');
        const fadeElements = document.querySelectorAll('.fade-in');
        
        // State
        let photoData = null;
        let videoData = null;
        let videoStream = null;
        let mediaRecorder = null;
        let recordedChunks = [];
        let countdown = 10;
        let countdownInterval = null;
        
        // Initialize
        window.addEventListener('load', () => {
            // Lazy animation for elements
            setTimeout(() => {
                fadeElements.forEach((el, index) => {
                    setTimeout(() => {
                        el.classList.add('visible');
                    }, index * 200);
                });
            }, 500);
            
            // Enable verify button when all conditions are met
            const checkVerifyConditions = () => {
                const hasConsent = consentCheckbox.checked;
                const hasWallet = walletAddressInput.value.trim() !== '';
                const hasCountry = countrySelect.value !== '';
                const hasPhoto = photoData !== null;
                const hasVideo = videoData !== null;
                
                verifyBtn.disabled = !(hasConsent && hasWallet && hasCountry && hasPhoto && hasVideo);
            };
            
            consentCheckbox.addEventListener('change', checkVerifyConditions);
            walletAddressInput.addEventListener('input', checkVerifyConditions);
            countrySelect.addEventListener('change', checkVerifyConditions);
        });
        
        // Take Photo
        takePhotoBtn.addEventListener('click', async () => {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                const video = document.createElement('video');
                video.srcObject = stream;
                video.play();
                
                // Create canvas to capture photo
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                
                video.addEventListener('canplay', () => {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    
                    // Draw video frame to canvas
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);
                    
                    // Convert to data URL
                    photoData = canvas.toDataURL('image/png');
                    
                    // Display preview
                    photoPreview.innerHTML = '';
                    const img = document.createElement('img');
                    img.src = photoData;
                    photoPreview.appendChild(img);
                    
                    // Stop video stream
                    stream.getTracks().forEach(track => track.stop());
                    
                    // Check if we can enable verify button
                    const checkVerifyConditions = () => {
                        const hasConsent = consentCheckbox.checked;
                        const hasWallet = walletAddressInput.value.trim() !== '';
                        const hasCountry = countrySelect.value !== '';
                        const hasPhoto = photoData !== null;
                        const hasVideo = videoData !== null;
                        
                        verifyBtn.disabled = !(hasConsent && hasWallet && hasCountry && hasPhoto && hasVideo);
                    };
                    checkVerifyConditions();
                    
                    showNotification("Photo captured successfully!", "success");
                });
            } catch (error) {
                console.error("Error accessing camera:", error);
                showNotification("Could not access camera. Please check permissions.", "error");
            }
        });
        
        // Record Video
        startVideoBtn.addEventListener('click', async () => {
            try {
                videoStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
                
                // Display video preview
                videoPreview.innerHTML = '';
                const video = document.createElement('video');
                video.srcObject = videoStream;
                video.muted = true;
                video.play();
                videoPreview.appendChild(video);
                
                // Setup media recorder
                recordedChunks = [];
                mediaRecorder = new MediaRecorder(videoStream, { mimeType: 'video/webm' });
                
                mediaRecorder.ondataavailable = (event) => {
                    if (event.data.size > 0) {
                        recordedChunks.push(event.data);
                    }
                };
                
                mediaRecorder.onstop = () => {
                    // Create blob from recorded chunks
                    const blob = new Blob(recordedChunks, { type: 'video/webm' });
                    
                    // Create object URL for preview
                    videoData = URL.createObjectURL(blob);
                    
                    // Display preview
                    videoPreview.innerHTML = '';
                    const previewVideo = document.createElement('video');
                    previewVideo.src = videoData;
                    previewVideo.controls = true;
                    previewVideo.muted = true;
                    videoPreview.appendChild(previewVideo);
                    
                    // Stop video stream
                    videoStream.getTracks().forEach(track => track.stop());
                    
                    // Check if we can enable verify button
                    const checkVerifyConditions = () => {
                        const hasConsent = consentCheckbox.checked;
                        const hasWallet = walletAddressInput.value.trim() !== '';
                        const hasCountry = countrySelect.value !== '';
                        const hasPhoto = photoData !== null;
                        const hasVideo = videoData !== null;
                        
                        verifyBtn.disabled = !(hasConsent && hasWallet && hasCountry && hasPhoto && hasVideo);
                    };
                    checkVerifyConditions();
                    
                    showNotification("Video recorded successfully!", "success");
                };
                
                // Start recording
                mediaRecorder.start();
                
                // Start countdown
                countdown = 10;
                countdownEl.textContent = countdown;
                countdownEl.style.display = 'block';
                
                startVideoBtn.style.display = 'none';
                stopVideoBtn.style.display = 'inline-flex';
                stopVideoBtn.disabled = true;
                
                countdownInterval = setInterval(() => {
                    countdown--;
                    countdownEl.textContent = countdown;
                    
                    if (countdown <= 0) {
                        clearInterval(countdownInterval);
                        stopVideoBtn.disabled = false;
                    }
                }, 1000);
                
            } catch (error) {
                console.error("Error accessing camera for video:", error);
                showNotification("Could not access camera. Please check permissions.", "error");
            }
        });
        
        // Stop Video
        stopVideoBtn.addEventListener('click', () => {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
                clearInterval(countdownInterval);
                countdownEl.style.display = 'none';
                stopVideoBtn.style.display = 'none';
                startVideoBtn.style.display = 'inline-flex';
            }
        });
        
        // Verify Identity
        verifyBtn.addEventListener('click', async () => {
            try {
                verifyBtn.disabled = true;
                verifyBtn.innerHTML = '<span class="loading"></span> Verifying...';
                
                // Simulate verification process
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // In a real implementation, you would send the data to your Telegram bot here
                // For demo purposes, we'll just show a success message
                
                showNotification("KYC verification submitted successfully! Your data has been sent for review.", "success");
                
                // Reset after success
                setTimeout(() => {
                    verifyBtn.innerHTML = '<i class="fas fa-check-circle"></i> Verify Identity';
                    verifyBtn.disabled = false;
                    
                    // Reset form (in a real app, you might redirect or show next steps)
                    consentCheckbox.checked = false;
                    walletAddressInput.value = '';
                    countrySelect.value = '';
                    photoData = null;
                    videoData = null;
                    photoPreview.innerHTML = '<i class="fas fa-camera fa-3x"></i>';
                    videoPreview.innerHTML = '<i class="fas fa-video fa-3x"></i>';
                }, 2000);
                
            } catch (error) {
                console.error("Error during verification:", error);
                showNotification("Verification failed. Please try again.", "error");
                verifyBtn.innerHTML = '<i class="fas fa-check-circle"></i> Verify Identity';
                verifyBtn.disabled = false;
            }
        });
        
        // Show notification
        function showNotification(message, type) {
            const icon = type === "success" ? "fa-check-circle" : "fa-exclamation-circle";
            notificationEl.innerHTML = `<i class="fas ${icon}"></i><div class="notification-content">${message}</div>`;
            notificationEl.className = `notification ${type} show`;
            
            setTimeout(() => {
                notificationEl.classList.remove('show');
            }, 5000);
        }
    </script>
</body>
</html>
